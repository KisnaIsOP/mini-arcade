<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aim Trainer - Mini Arcade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes target-appear {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }
        @keyframes target-hit {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(0); opacity: 0; }
        }
        @keyframes target-miss {
            0% { transform: scale(1); }
            100% { transform: scale(0.8); opacity: 0; }
        }
        .target {
            animation: target-appear 0.3s ease-out;
        }
        .target-hit {
            animation: target-hit 0.3s ease-out;
        }
        .target-miss {
            animation: target-miss 0.3s ease-out;
        }
        .game-area {
            position: relative;
            cursor: crosshair;
        }
        .crosshair-cursor {
            cursor: crosshair;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900">
    <div class="container mx-auto px-4 py-8 min-h-screen flex flex-col">
        <!-- Header -->
        <header class="text-center mb-6">
            <div class="flex items-center justify-between mb-4">
                <a href="index.html" class="bg-white/10 backdrop-blur-sm border border-white/20 text-white px-6 py-3 rounded-xl hover:bg-white/20 transition-all duration-300 flex items-center space-x-2">
                    <span>‚Üê</span>
                    <span>Home</span>
                </a>
                <div class="text-right">
                    <div class="text-sm text-gray-300">Best Score</div>
                    <div class="text-2xl font-bold text-purple-400" id="bestScore">---</div>
                </div>
            </div>
            <h1 class="text-4xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400 mb-4">
                üéØ Aim Trainer
            </h1>
            <p class="text-lg text-gray-300">Hit as many targets as possible in 10 seconds!</p>
        </header>

        <!-- Game Stats -->
        <div class="grid grid-cols-4 gap-4 mb-6 text-center">
            <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-3">
                <div class="text-2xl font-bold text-white" id="timeLeft">10</div>
                <div class="text-xs text-gray-300">Time</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-3">
                <div class="text-2xl font-bold text-green-400" id="score">0</div>
                <div class="text-xs text-gray-300">Score</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-3">
                <div class="text-2xl font-bold text-blue-400" id="hits">0</div>
                <div class="text-xs text-gray-300">Hits</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-3">
                <div class="text-2xl font-bold text-purple-400" id="accuracy">100%</div>
                <div class="text-xs text-gray-300">Accuracy</div>
            </div>
        </div>

        <!-- Game Area -->
        <div class="flex-1 relative">
            <div id="gameArea" class="game-area w-full h-full min-h-96 bg-gradient-to-br from-black/20 to-black/40 backdrop-blur-sm border-2 border-white/20 rounded-2xl relative overflow-hidden">
                <!-- Start Screen -->
                <div id="startScreen" class="absolute inset-0 flex items-center justify-center z-20">
                    <div class="text-center">
                        <div class="text-6xl mb-4">üéØ</div>
                        <button id="startBtn" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold py-4 px-8 rounded-xl text-xl hover:shadow-lg hover:shadow-blue-500/30 transition-all duration-300 transform hover:scale-105">
                            Start Game
                        </button>
                        <div class="mt-4 text-gray-300 text-sm">Click the targets as fast as you can!</div>
                    </div>
                </div>

                <!-- Game Over Screen -->
                <div id="gameOverScreen" class="absolute inset-0 flex items-center justify-center z-20 hidden">
                    <div class="text-center bg-black/50 backdrop-blur-sm border border-white/20 rounded-2xl p-8">
                        <div class="text-4xl mb-4">üèÜ</div>
                        <div class="text-3xl font-bold text-white mb-2">Game Over!</div>
                        <div class="text-xl font-bold text-purple-400 mb-2" id="finalScore">Score: 0</div>
                        <div class="text-lg text-gray-300 mb-4" id="finalStats">0 hits, 100% accuracy</div>
                        <div class="text-lg text-gray-300 mb-6" id="resultMessage">Great job!</div>
                        <button id="playAgainBtn" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white font-bold py-3 px-6 rounded-xl hover:shadow-lg hover:shadow-purple-500/30 transition-all duration-300 transform hover:scale-105">
                            Play Again
                        </button>
                    </div>
                </div>

                <!-- Targets will be spawned here -->
            </div>
        </div>

        <!-- Instructions -->
        <div class="text-center mt-6">
            <div class="bg-black/20 backdrop-blur-sm border border-white/10 rounded-xl p-4 max-w-2xl mx-auto">
                <h3 class="text-lg font-bold text-white mb-2">How to Play:</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300">
                    <div>
                        <div class="font-semibold text-green-400">üéØ Target Values:</div>
                        <div>‚Ä¢ Small targets: 10 points</div>
                        <div>‚Ä¢ Medium targets: 5 points</div>
                        <div>‚Ä¢ Large targets: 2 points</div>
                    </div>
                    <div>
                        <div class="font-semibold text-blue-400">üí° Tips:</div>
                        <div>‚Ä¢ Smaller = More points</div>
                        <div>‚Ä¢ Speed matters!</div>
                        <div>‚Ä¢ Aim for high accuracy</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class AimTrainer {
            constructor() {
                this.gameArea = document.getElementById('gameArea');
                this.startScreen = document.getElementById('startScreen');
                this.gameOverScreen = document.getElementById('gameOverScreen');
                this.startBtn = document.getElementById('startBtn');
                this.playAgainBtn = document.getElementById('playAgainBtn');
                
                this.timeLeftEl = document.getElementById('timeLeft');
                this.scoreEl = document.getElementById('score');
                this.hitsEl = document.getElementById('hits');
                this.accuracyEl = document.getElementById('accuracy');
                this.bestScoreEl = document.getElementById('bestScore');
                
                this.finalScore = document.getElementById('finalScore');
                this.finalStats = document.getElementById('finalStats');
                this.resultMessage = document.getElementById('resultMessage');
                
                this.gameState = 'ready'; // ready, playing, finished
                this.score = 0;
                this.hits = 0;
                this.shots = 0;
                this.timeRemaining = 10;
                this.gameTimer = null;
                this.spawnTimer = null;
                this.targets = [];
                
                this.loadBestScore();
                this.bindEvents();
            }

            bindEvents() {
                this.startBtn.addEventListener('click', () => this.startGame());
                this.playAgainBtn.addEventListener('click', () => this.resetGame());
                this.gameArea.addEventListener('click', (e) => this.handleAreaClick(e));
            }

            startGame() {
                this.gameState = 'playing';
                this.score = 0;
                this.hits = 0;
                this.shots = 0;
                this.timeRemaining = 10;
                this.targets = [];
                
                this.startScreen.classList.add('hidden');
                this.gameArea.classList.add('crosshair-cursor');
                
                this.updateDisplay();
                this.startTimer();
                this.startTargetSpawning();
            }

            startTimer() {
                this.gameTimer = setInterval(() => {
                    this.timeRemaining -= 0.1;
                    
                    if (this.timeRemaining <= 0) {
                        this.endGame();
                    } else {
                        this.updateDisplay();
                    }
                }, 100);
            }

            startTargetSpawning() {
                this.spawnTarget();
                
                this.spawnTimer = setInterval(() => {
                    if (this.gameState === 'playing') {
                        this.spawnTarget();
                    }
                }, 800 + Math.random() * 400); // Random interval between 0.8-1.2 seconds
            }

            spawnTarget() {
                const target = document.createElement('div');
                const size = this.getRandomTargetSize();
                const rect = this.gameArea.getBoundingClientRect();
                
                // Random position (ensuring target fits within bounds)
                const maxX = rect.width - size;
                const maxY = rect.height - size;
                const x = Math.random() * maxX;
                const y = Math.random() * maxY;
                
                target.className = `target absolute rounded-full cursor-pointer select-none`;
                target.style.width = size + 'px';
                target.style.height = size + 'px';
                target.style.left = x + 'px';
                target.style.top = y + 'px';
                target.style.background = this.getTargetColor(size);
                target.style.border = '3px solid rgba(255, 255, 255, 0.8)';
                target.style.boxShadow = '0 0 20px rgba(255, 255, 255, 0.5)';
                
                // Store target data
                target.dataset.points = this.getTargetPoints(size);
                target.dataset.size = size;
                
                target.addEventListener('click', (e) => this.hitTarget(e, target));
                
                this.gameArea.appendChild(target);
                this.targets.push(target);
                
                // Auto-remove target after 2 seconds
                setTimeout(() => {
                    if (target.parentNode && this.gameState === 'playing') {
                        this.missTarget(target);
                    }
                }, 2000);
            }

            getRandomTargetSize() {
                const rand = Math.random();
                if (rand < 0.2) return 30; // Small (20% chance)
                if (rand < 0.6) return 50; // Medium (40% chance)
                return 80; // Large (40% chance)
            }

            getTargetColor(size) {
                if (size <= 30) return 'linear-gradient(45deg, #ff6b6b, #ee5a52)'; // Red for small
                if (size <= 50) return 'linear-gradient(45deg, #4ecdc4, #44a08d)'; // Teal for medium
                return 'linear-gradient(45deg, #45b7d1, #96c93d)'; // Green for large
            }

            getTargetPoints(size) {
                if (size <= 30) return 10; // Small targets worth more
                if (size <= 50) return 5;  // Medium targets
                return 2; // Large targets worth least
            }

            hitTarget(e, target) {
                e.stopPropagation();
                
                if (this.gameState !== 'playing') return;
                
                const points = parseInt(target.dataset.points);
                this.score += points;
                this.hits++;
                this.shots++;
                
                // Hit animation
                target.classList.add('target-hit');
                
                // Show points
                this.showPointsPopup(e.clientX, e.clientY, points);
                
                // Remove target
                setTimeout(() => {
                    if (target.parentNode) {
                        target.remove();
                    }
                }, 300);
                
                this.targets = this.targets.filter(t => t !== target);
                this.updateDisplay();
            }

            missTarget(target) {
                if (!target.parentNode) return;
                
                target.classList.add('target-miss');
                setTimeout(() => {
                    if (target.parentNode) {
                        target.remove();
                    }
                }, 300);
                
                this.targets = this.targets.filter(t => t !== target);
            }

            handleAreaClick(e) {
                if (this.gameState !== 'playing') return;
                if (e.target !== this.gameArea) return; // Clicked on a target, not empty area
                
                this.shots++;
                this.updateDisplay();
                
                // Miss effect
                this.showMissEffect(e.offsetX, e.offsetY);
            }

            showPointsPopup(x, y, points) {
                const popup = document.createElement('div');
                popup.textContent = `+${points}`;
                popup.className = 'fixed text-2xl font-bold text-green-400 pointer-events-none z-30';
                popup.style.left = x + 'px';
                popup.style.top = y + 'px';
                popup.style.animation = 'float 1s ease-out forwards';
                
                document.body.appendChild(popup);
                setTimeout(() => popup.remove(), 1000);
            }

            showMissEffect(x, y) {
                const miss = document.createElement('div');
                miss.textContent = '√ó';
                miss.className = 'absolute text-3xl font-bold text-red-400 pointer-events-none';
                miss.style.left = x + 'px';
                miss.style.top = y + 'px';
                miss.style.animation = 'target-miss 0.5s ease-out';
                
                this.gameArea.appendChild(miss);
                setTimeout(() => miss.remove(), 500);
            }

            updateDisplay() {
                const timeDisplay = Math.max(0, this.timeRemaining).toFixed(1);
                this.timeLeftEl.textContent = timeDisplay;
                this.scoreEl.textContent = this.score;
                this.hitsEl.textContent = this.hits;
                
                const accuracy = this.shots > 0 ? ((this.hits / this.shots) * 100).toFixed(1) : 100;
                this.accuracyEl.textContent = accuracy + '%';
            }

            endGame() {
                this.gameState = 'finished';
                clearInterval(this.gameTimer);
                clearInterval(this.spawnTimer);
                
                // Remove all targets
                this.targets.forEach(target => {
                    if (target.parentNode) {
                        target.remove();
                    }
                });
                this.targets = [];
                
                this.gameArea.classList.remove('crosshair-cursor');
                this.showResults();
                this.updateBestScore();
            }

            showResults() {
                const accuracy = this.shots > 0 ? ((this.hits / this.shots) * 100).toFixed(1) : 100;
                
                this.finalScore.textContent = `Score: ${this.score}`;
                this.finalStats.textContent = `${this.hits} hits, ${accuracy}% accuracy`;
                
                let message = '';
                if (this.score >= 80) {
                    message = 'üî• INCREDIBLE! You\'re a sharpshooter!';
                } else if (this.score >= 60) {
                    message = 'üéØ EXCELLENT! Great aim!';
                } else if (this.score >= 40) {
                    message = 'üëç GOOD JOB! Nice shooting!';
                } else if (this.score >= 20) {
                    message = 'üòä NOT BAD! Keep practicing!';
                } else {
                    message = 'üòÖ PRACTICE MORE! You\'ll improve!';
                }
                
                this.resultMessage.textContent = message;
                this.gameOverScreen.classList.remove('hidden');
            }

            resetGame() {
                this.gameState = 'ready';
                this.gameOverScreen.classList.add('hidden');
                this.startScreen.classList.remove('hidden');
                
                this.score = 0;
                this.hits = 0;
                this.shots = 0;
                this.timeRemaining = 10;
                
                this.updateDisplay();
            }

            loadBestScore() {
                const best = localStorage.getItem('aimBest');
                this.bestScoreEl.textContent = best ? `${best} pts` : '---';
            }

            updateBestScore() {
                const currentBest = localStorage.getItem('aimBest');
                if (!currentBest || this.score > parseInt(currentBest)) {
                    localStorage.setItem('aimBest', this.score.toString());
                    this.bestScoreEl.textContent = `${this.score} pts`;
                    this.bestScoreEl.className = 'text-2xl font-bold text-green-400 animate-pulse';
                    setTimeout(() => {
                        this.bestScoreEl.className = 'text-2xl font-bold text-purple-400';
                    }, 2000);
                }
            }
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new AimTrainer();
        });

        // Add custom CSS for float animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes float {
                0% { transform: translateY(0px); opacity: 1; }
                100% { transform: translateY(-30px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>